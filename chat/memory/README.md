# 记忆模块
## 简介
模型记忆分为三层，分别记录实时、短期、长期的记忆，采用四种存储方式，为群聊场景特殊优化。
## 存储方式
- **内存**：直接用`Python List`实现，主要用于实时记忆记录。
- **关系数据库**：使用`SQLite`轻量数据库
- **向量数据库**：使用`Qdrant`向量数据库
- **图数据库**：是用`neo4j`图数据库
## 记忆层级
### 工作记忆（working memory）
主要存储实时记忆，存放在内存中，采用滑动窗口，限制token数和窗口大小，当向模型提问时会携带所有的记忆，在遗忘时被遗忘的记忆会送入情景记忆中。
### 情景记忆（episodic memory）
存储短期记忆，使用关系数据库+向量数据库混合存储模式，提供硬检索和语义检索两种模式，在检索时会从两个通道分别召回记忆，在重排后输出top-k记忆，被遗忘的记忆将会被丢弃。
### 语义记忆（semantic memory）
存储长期记忆，使用向量数据库+图数据库的混合存储模式，检索时从两个通道检索分别输出top-k记忆，由一个定时脚本整理情景记忆中未被处理过的记忆，让大模型总结压缩为几个话题插入向量数据库和图数据库，其中的记忆永远不会被遗忘。